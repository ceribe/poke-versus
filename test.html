<script>
  function init() {
    websocket = new WebSocket("ws://localhost:8128/pv");
    websocket.binaryType = "arraybuffer";
    websocket.onmessage = (e) => onMessage(e);
  }

  function onMessage(e) {
    //   const dv = new DataView(e.data, 0);
    //   const f = dv.getFloat32(0);
    //   console.log(f);
    console.log(e.data);
  }

  function onMouseClick(event) {
    //Send mouse coordinates (2x short int) to the server as an array buffer
    const msg = new ArrayBuffer(4);
    const view = new DataView(msg);
    view.setInt8(0, 0, true);
    view.setInt8(1, 5, true);
    view.setInt8(2, 6, true);
    view.setInt8(3, 7, true);

    websocket.send(msg);
  }

  window.addEventListener("load", init, false);
  window.addEventListener("click", onMouseClick, false);
</script>
